{"dpp_template_code":"# Unfortunately no realtime recipe for quTAG, as the file is not written by\n# the control software until the experiment is stopped.\n#------IMPORTS-----\n\nimport numpy as np\nimport pandas as pd\nfrom pathlib import Path\n\nimport etabackend.tk.plot as etaplt\nimport etabackend.tk.utils as etautils\n\n#------ADJUST DELAY-----\ndelay = int(float(delay))\nbinsize = int(float(binsize))\neta.recipe.set_parameter(\"bw_delay\",str(max(0,-1*delay)))\neta.recipe.set_parameter(\"fw_delay\",str(max(0,delay)))\neta.load_recipe()\n\n#------ETA PROCESSING-----\ncut=eta.clips(Path(file), format = 1)\nresult= eta.run({\"timetagger1\":cut}, group='quTAG')\nfullhist=result[ch_sel]\nxdata = np.arange(fullhist.size) * binsize\n\nf=Path(file)\nDATAFOLDER = 'analyzed data'\nLABEL = expname\n#------PLOTTING-----\n\ndf = pd.DataFrame(np.vstack((xdata, fullhist)).T, \n                  columns=['time bins', 'histogram events'])\ndf['log events'] = np.clip(df['histogram events'].values, 0.5, None)\n\ndef generate_doc(doc):\n    root = etaplt.plot_histogram(df, f,  f.parent.joinpath(DATAFOLDER), \n                                 data_name=LABEL.capitalize(), file_label=LABEL.lower(), \n                                 info=etautils.info(globals_dict=eta.compilecache_vars['quTAG'], recipe_type=LABEL))\n    doc.add_root(root)\n    return doc\n\neta.display(generate_doc, 'bokeh')\n","eta_index_table":"[{\"id\":\"var_templatejkim3bkj\",\"name\":\"file\",\"group\":\"swabian\",\"info\":\"\",\"config\":\"C:/Users/staff/Documents/Lidar LF/Data ToF/231026/Test_start1_stop2_target 1_10s_det1.timeres\"},{\"id\":\"var_templatejkim48wp\",\"name\":\"binsize\",\"group\":\"swabian\",\"info\":\"\",\"config\":\"20\"},{\"id\":\"var_templatejkim2z6x\",\"name\":\"bins\",\"group\":\"swabian\",\"info\":\"\",\"config\":\"10000\"},{\"id\":\"var_templatejkim6uch\",\"name\":\"expname\",\"group\":\"swabian\",\"info\":\"\",\"config\":\"target 1\"},{\"id\":\"var_templatejks89alb\",\"name\":\"ch_sel\",\"group\":\"swabian\",\"info\":\"\",\"config\":\"t3\"},{\"id\":\"var_templatek1wj6afv\",\"name\":\"records_per_cut\",\"group\":\"swabian\",\"info\":\"\",\"config\":\"2e5\"},{\"id\":\"var_templatek8k9432h\",\"name\":\"sync_delay\",\"group\":\"swabian\",\"info\":\"\",\"config\":\"0\"},{\"id\":\"var_templatek8k94746\",\"name\":\"det_delay\",\"group\":\"swabian\",\"info\":\"\",\"config\":\"0\"},{\"id\":\"dpp_template_code\",\"name\":\"display\",\"group\":\"swabian\",\"info\":\"\",\"config\":\"\"},{\"id\":\"vi_templatejks7yt8a\",\"name\":\"delay1-8\",\"group\":\"swabian\",\"info\":\"ðŸ“¥[1] ðŸ“¤[8] \",\"config\":\"\"},{\"id\":\"vi_templatejhrlupxy\",\"name\":\"delay2-9\",\"group\":\"swabian\",\"info\":\"ðŸ“¥[2, 3, 4] ðŸ“¤[9, 10, 11] \",\"config\":\"\"},{\"id\":\"vi_templatekbz03aiq\",\"name\":\"lifetime (start=ch2, stop=ch1)[t3]\",\"group\":\"swabian\",\"info\":\"ðŸ“¥[8, 9, 10, 11] \",\"config\":\"\"},{\"id\":\"vi_templatek6z86r0w\",\"name\":\"Time Tagger\",\"group\":\"swabian\",\"info\":\"ðŸ“œ[0, 1, 2, 3, 4, 5] \",\"config\":\"\"}]","vi_templatejhrlupxy":"{\"nodes\":[{\"x\":141,\"y\":129,\"fixed\":true,\"initial\":true,\"text\":\"a\"}],\"edges\":[{\"source\":0,\"target\":0,\"text\":\"2,3,4\"}],\"usercode\":\"a--2-->a:\\n    emit(9,`det_delay`)# here, ch2 is duplicated to ch9 with a delay of bw_delay ps\\n    \\na--3-->a:\\n    emit(10,`det_delay`)# here, ch3 is duplicated to ch10 with a delay of bw_delay ps\\n    \\na--4-->a:\\n    emit(11,`det_delay`)# here, ch4 is duplicated to ch11 with a delay of bw_delay ps\\n\"}","var_templatejkim2z6x":null,"var_templatejkim3bkj":null,"var_templatejkim48wp":null,"var_templatejkim6uch":null,"vi_templatejks7yt8a":"{\"nodes\":[{\"x\":141,\"y\":129,\"fixed\":true,\"initial\":true,\"text\":\"a\"}],\"edges\":[{\"source\":0,\"target\":0,\"text\":\"1\"}],\"usercode\":\"a:\\n    emit(8,`sync_delay`) # here, ch1 is duplicated to ch8 with a delay of fw_delay ps\"}","var_templatejks89alb":null,"var_templatek1wj6afv":null,"vi_templatek6z86r0w":"{\"nodes\":[{\"x\":135,\"y\":77,\"fixed\":true,\"initial\":true,\"px\":135,\"py\":77}],\"edges\":[],\"usercode\":\"RFILE(timetagger1,[0,1,2,3,4,5])\"}","var_templatek8k9432h":null,"var_templatek8k94746":null,"vi_templatekbz03aiq":"{\"nodes\":[{\"x\":145,\"y\":157,\"fixed\":true,\"initial\":true,\"text\":\"timer\",\"marked\":true}],\"edges\":[{\"source\":0,\"target\":0,\"text\":\"8,9,10,11\"}],\"usercode\":\"CLOCK(c1)\\nHISTOGRAM(h2,(`bins`,`binsize`))\\nHISTOGRAM(h3,(`bins`,`binsize`))\\nHISTOGRAM(h4,(`bins`,`binsize`))\\n\\n\\ntimer--8-->timer:\\n    c1.start()\\n    \\ntimer--9-->timer:\\n    c1.stop()\\n    h2.record(c1)\\n    \\ntimer--10-->timer:\\n    c1.stop()\\n    h3.record(c1)\\n    \\ntimer--11-->timer:\\n    c1.stop()\\n    h4.record(c1)\"}","vi_templatelo5vydeq":"{\"nodes\":[],\"edges\":[],\"usercode\":\"\\n########## click Help on the menu to get started! ##########\\n\"}"}